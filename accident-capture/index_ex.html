<!DOCTYPE html>
<html manifest="../../../dhis-web-event-capture/cacheManifest.action" ng-app="eventCapture">

<head>
    <title>Accident Capture</title>

    <meta name="description" content="IROAD 2">
    <meta name="keywords" content="IROAD 2">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <!-- GOOGLE MAPS PLUGINS -->
    <script src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <!-- Angulars Material CSS now available via Google CDN; version 0.6 used here -->
    <link rel="stylesheet" href="resources/angular-material/angular-material.css">
    <link href="resources/DataTables/media/css/jquery.dataTables.css" rel="stylesheet" />
    <link href="resources/bootstrap/bootstrap.css" rel="stylesheet" />

    <link type="text/css" rel="stylesheet" href="../../../dhis-web-commons/font-awesome/css/font-awesome.min.css"/>
    <link type="text/css" rel="stylesheet" media="screen" href="../../../dhis-web-commons/css/widgets.css"/>
    <link type="text/css" rel="stylesheet" media="screen" href="../../../dhis-web-commons/css/menu.css">
    <!-- Required For The Tables -->
    <link rel="stylesheet" type="text/css" href="resources/table/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="resources/table/style.css" media="screen">
    <link rel="stylesheet" type="text/css" href="resources/table/mws-style.css" media="screen">
    <link rel="stylesheet" type="text/css" href="resources/table/icol16.css" media="screen">
    <link rel="stylesheet" type="text/css" href="resources/table/icol32.css" media="screen">
    <link rel="stylesheet" type="text/css" href="resources/table/mws-theme.css" media="screen">
    <link rel="stylesheet" type="text/css" href="resources/table/themer.css" media="screen">
    <!-- Required For The Tables -->

    <script>
        window.dhis2 = window.dhis2 || {};
        dhis2.settings = dhis2.settings || {};
        dhis2.settings.baseUrl = 'demo';
    </script>

    <script>
        var dhisConfigs = {
            baseUrl :"../../../",
            refferencePrefix :"Program_"
        }
    </script>

</head>

<body>

<d2-header-bar></d2-header-bar>
<div class="mws-panel grid_8" style="background-color: white;position: absolute;right:0" >

    <div class="mws-panel-header"  style="height: 48px !important;">
        <span><i class="icon-table"></i><a style="color: #fff0ff !important;" href="http://localhost:8080/demo/dhis-web-apps/apps/accident-capture/index.html#/" title="goto Accidents">ACCIDENTS</a>
        </span>
    </div>

<div id="map" style="width: 100%; height: 550px;padding-left: 100px;"></div>


</div>
<script>
    // Define your locations: HTML content for the info window, latitude, longitude
    var locations = [
        ['<h4>Bondi Accident</h4>', -6.63883676, 39.19136727],
        ['<h4>Coogee Accident</h4>', -6.7841000000000005, 39.208666666666666],
        ['<h4>Cronulla Accident</h4>',-6.77151607, 39.23985423]
    ];

    // Setup the different icons and shadows
    var iconURLPrefix = 'http://maps.google.com/mapfiles/ms/icons/';

    var icons = [
        iconURLPrefix + 'red-dot.png',
        iconURLPrefix + 'green-dot.png',
        iconURLPrefix + 'blue-dot.png',
        iconURLPrefix + 'orange-dot.png',
        iconURLPrefix + 'purple-dot.png',
        iconURLPrefix + 'pink-dot.png',
        iconURLPrefix + 'yellow-dot.png'
    ]
    var iconsLength = icons.length;

    var map = new google.maps.Map(document.getElementById('map'), {
        zoom: 10,
        center: new google.maps.LatLng(-37.92, 151.25),
        mapTypeId: google.maps.MapTypeId.HYBRID,
        mapTypeControl: false,
        streetViewControl: false,
        panControl: false,
        zoomControlOptions: {
            position: google.maps.ControlPosition.LEFT_BOTTOM
        }
    });

    var infowindow = new google.maps.InfoWindow({
        maxWidth: 160
    });

    var markers = new Array();

    var iconCounter = 0;

    // Add the markers and infowindows to the map
    for (var i = 0; i < locations.length; i++) {
        var marker = new google.maps.Marker({
            position: new google.maps.LatLng(locations[i][1], locations[i][2]),
            animation:google.maps.Animation.BOUNCE,
            map: map,
            icon: iconURLPrefix + 'red-dot.png'
        });

        markers.push(marker);

        google.maps.event.addListener(marker, 'click', (function(marker, i) {
            return function() {
                infowindow.setContent(locations[i][0]);
                infowindow.open(map, marker);
            }
        })(marker, i));

        iconCounter++;
        // We only have a limited number of possible icon colors, so we may have to restart the counter
        if(iconCounter >= iconsLength) {
            iconCounter = 0;
        }
    }

    function autoCenter() {
        //  Create a new viewpoint bound
        var bounds = new google.maps.LatLngBounds();
        //  Go through each...
        for (var i = 0; i < markers.length; i++) {
            bounds.extend(markers[i].position);
        }
        //  Fit these bounds to the map
        map.fitBounds(bounds);
    }
    autoCenter();
</script>

<script type="text/javascript" src="../../../dhis-web-commons/javascripts/jQuery/jquery.min.js"></script>
<script type="text/javascript" src="../../../dhis-web-commons/javascripts/jQuery/ui/jquery-ui.min.js"></script>
<script type="text/javascript" src="../../../dhis-web-commons/javascripts/jQuery/jquery.plugin.min.js"></script>
<!-- Menu scripts -->
<script type="text/javascript" src="../../../dhis-web-commons/javascripts/dhis2/dhis2.translate.js"></script>
<script type="text/javascript" src="../../../dhis-web-commons/javascripts/dhis2/dhis2.menu.js"></script>
<script type="text/javascript" src="../../../dhis-web-commons/javascripts/dhis2/dhis2.menu.ui.js"></script>

</body>
</html>
